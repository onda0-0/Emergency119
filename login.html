<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>응급9조대</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<script type="module">
    // Firebase SDK 라이브러리 가져오기
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";


    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
        apiKey: "AIzaSyB1LgAbTFdpbyOmHTg6U60bFVjSsWZZ2KQ",
        authDomain: "test1-decaa.firebaseapp.com",
        projectId: "test1-decaa",
        storageBucket: "test1-decaa.appspot.com",
        messagingSenderId: "629960551291",
        appId: "1:629960551291:web:d57635d3234a59873a2bde",
        measurementId: "G-C4CG02WP18"
    };


    // Firebase 인스턴스 초기화
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    $(document).ready(async function () {
        $("#loginbtn").click(async function () {
            let docs = await getDocs(collection(db, "user"));

            let idin = $('#idin').val();
            let pwin = $('#pwin').val();

            let loggedIn = false;

            docs.forEach((doc) => {
                let row = doc.data();
                let id = row['id'];
                let pw = row['pw'];

                if (id === idin && pw === pwin) {
                    loggedIn = true;
                    //alert('로그인 성공');
                    window.location.href = 'index.html';
                }
            });

            // 로그인에 실패한 경우에만 실행됨
            if (!loggedIn) {
                alert('id와 pw를 확인하세요');
            }
        });

        $("#signupbtn").click(async function () {
            location.href = 'sign.html';
        });
    });



</script>

<style>
    body {
        background-image: url("src/background/login.png");
        background-size: cover;
    }

    .Login {
        font-size: 400px;
        color: white;
        display: flex;
        justify-content: flex-start;
        align-items: center;
        min-height: 100dvh;
    }

    .Log-in {
        font-size: 200px;
        display: flex;
        float: left;
        margin-left: 100px;
    }

    input::placeholder {
        color: #BE50C1;
        font-size: 30px;
    }

    .loginbtn {
        color: white;
        background-color: #BE50C1;
        font-size: 30px;
        width: 450px;
        height: 70px;
        border-radius: 10px;
    }

    .signupbtn {
        color: white;
        background-color: #BE50C1;
        font-size: 30px;
        width: 300px;
        height: 50px;
        margin-left: 70px;
        border-radius: 10px;
    }

    #idin,
    #pwin {
        border-radius: 10px;
    }
</style>

<body>
    <div class="main">
        <div class="Login">
            <div class="Log-in">
                <h1 class="Info">
                    Login<br><br>
                    <input type="text" id="idin" name="idin" placeholder="아이디 입력"><br><br>
                    <input type="password" id="pwin" name="pwin" placeholder="비밀번호 입력"><br><br>
                    <button type="button" class="loginbtn" id="loginbtn">LOGIN</button><br><br>
                    <button type="button" class="signupbtn" id="signupbtn">Sign up</button>
                </h1><br>


            </div>
        </div>
    </div>



    </div>


</body>

</html>